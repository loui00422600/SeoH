<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
<style>
    div {}

    .main {
        width: 1500px;
        height: 1050px;
        margin: auto;
        background-color: rgb(185, 183, 183);
    }

    .main>div.head {
        height: 150px;

        display: flex;
        justify-content: space-between;
    }

    .head>div:nth-child(1) {
        width: 20%;
        height: 100%;
        display: flex;
    }

    .head>div:nth-child(1)>img {
        width: 90%;
        height: 90%;
        margin: auto;
    }

    .head>div:nth-child(3) {
        width: 25%;
        height: 100%;
    }

    .center {
        height: 900px;
    }

    .login {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 10px;
        flex-direction: column;

    }

    .login2 {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: auto;
    }



    .login2>div:nth-child(1)>input {
        margin-bottom: 10px;
        margin-top: 10px;

        width: 200px;
    }

    .login2>div:nth-child(2) {
        margin-left: 10px;
    }


    .login2>div>button {
        width: 70px;
        height: 80px;
        border-radius: 5px;
    }

    .login2>div>button:hover {
        filter: brightness(80%);
    }

    .creat {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: auto;
    }

    .creat>button:hover {
        filter: brightness(80%);
    }

    .t_modal {
        width: 1500px;
        height: 950px;
        margin: auto;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
        position: absolute;
    }

    .createmodal {
        width: 30%;
        height: 70%;
        position: absolute;
        background-color: wheat;
        border-radius: 8px;

    }

    .close {
        height: 5%;
        display: flex;
        justify-content: end;
    }

    .close>img {
        height: 100%;
    }

    .user {
        height: 70%;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;

    }

    .usersub {
        justify-content: space-around;

    }

    .userbtn {
        height: 10%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .userbtn>button {
        width: 200px;
        height: 50px;
        border-radius: 10px;
    }

    .userbtn>button:hover {
        filter: brightness(80%);
    }


    .black_wall {
        position: absolute;
        width: 100%;
        height: 1050px;
        background-color: #00000055;
    }

    .d_none{
        display: none;
    }

    /* .backcolor{
        filter: brightness(70%);
    } */
</style>

<body>
    <!-- <div class="black_wall"></div> -->
    <div class="main">
        <div class="t_modal d_none">
            <div class="createmodal">
                <div class="close">
                    <img src="../resources/images/closebtn.webp" onclick="f_onoff()" alt="">
                </div>
                <div style="text-align: center;">
                    <h1>회원가입</h1>
                </div>
                <div class="user">
                    <div class="usersub"><b>이름</b>
                        <input type="text" onchange="f_createname()" id="username"
                            style="width: 300px; border-radius: 8px;">
                        <div id="namecheck" style="font-size: 7px;"></div>
                    </div>
                    <div class="usersub"><b>id</b>
                        <input type="text" onchange="f_createid()" id="userid"
                            style="width: 300px; border-radius: 8px;">
                        <div id="idcheck" style="font-size: 7px;"></div>
                    </div>
                    <div class="usersub"><b>pw</b>
                        <input type="text" onchange="f_createpw()" id="userpw"
                            style="width: 300px; border-radius: 8px;">
                        <div id="pwcheck" style="font-size: 7px;"></div>
                    </div>
                    <div class="usersub"><b>pw확인</b>
                        <input type="text" onchange="f_createcheck()" id="userpwcheck"
                            style="width: 300px; border-radius: 8px;">
                        <div id="pwchecking" style="font-size: 7px;"></div>
                    </div>
                    <div class="usersub"><b>이메일</b>
                        <input type="text" onchange="f_createemail()" id="useremail"
                            style="width: 300px; border-radius: 8px;">
                        <div id="emailcheck" style="font-size: 7px;"></div>
                    </div>
                </div>
                <div class="userbtn">
                    <button onclick="f_join()">회원가입</button>
                </div>
            </div>
        </div>
        <div class="head">
            <div class="logo">
                <img src="" alt="">
            </div>
            <div class="t_title" style="border: 1px solid blue;"></div>
            <div class="login">
                <div class="login2">
                    <div>
                        ID&nbsp<input type="text"><br>
                        PW<input type="password">
                    </div>
                    <div>
                        <button>로그인</button>
                    </div>
                </div>
                <div class="creat">
                    <button onclick="f_onoff()">회원가입</button>
                </div>
            </div>
        </div>
        <div class="center backcolor">
            <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active" data-bs-interval="10000">
                        <img src="../resources/images/trainback4.jpg" style="width:100%; height: 900px;" class=""
                            alt="...">
                    </div>
                    <div class="carousel-item" data-bs-interval="2000">
                        <img src="../resources/images/trainback2.jpg" style="width:100%;  height: 900px; z-index: 50;"
                            class="" alt="..." onclick="f_modal()">
                        <button style="position: absolute; z-index: 100;">클릭</button>
                    </div>
                    <div class="carousel-item">
                        <img src="../resources/images/trainback3.jpg" style="width:100%;  height: 900px;" class=""
                            alt="...">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        const v_creatname = document.getElementById("username");
        const v_creatid = document.getElementById("userid");
        const v_creatpw = document.getElementById("userpw");
        const v_creatpwcheck = document.getElementById("userpwcheck");
        const v_createmail = document.getElementById("useremail");
        const v_idcheck = document.getElementById("idcheck");
        const v_pwcheck = document.getElementById("pwcheck");
        const v_namecheck = document.getElementById("namecheck");
        const v_pwchecking = document.getElementById("pwchecking");
        const v_emailcheck = document.getElementById("emailcheck");
        const v_modal = document.querySelector(".t_modal");


        let onoff=false;
        function f_onoff(){
            if(!onoff){
                v_modal.classList.remove("d_none");
                onoff=true;
                v_creatid.value="";
                v_creatpw.value="";
                v_creatpwcheck.value="";
                v_createmail.value="";
                v_creatname.value="";
            } else{
                v_modal.classList.add("d_none");
                onoff=false;
            }
        }


        function f_createname() {
            if (v_creatname.value != "") {
                v_creatname.style.boxShadow = "0px 0px 2px 2px skyblue"
                v_namecheck.style.color = "skyblue"
                v_namecheck.innerHTML = "이름이 입력되었습니다."
            } else {
                v_creatname.style.boxShadow = "0px 0px 2px 2px red"
                v_namecheck.style.color = "red"
                v_namecheck.innerHTML = "이름을 입력해주세요."
            }

        }

        function f_createid() {
            let regex = /^[a-zA-Z0-9]{6,12}$/;
            let v_result = regex.test(v_creatid.value);
            if (!v_result) {
                v_creatid.style.boxShadow = "0px 0px 2px 2px red"
                v_idcheck.style.color = "red"
                v_idcheck.innerHTML = "형식에 맞지 않는 id입니다."
            } 
            else {
                v_creatid.style.boxShadow = "0px 0px 2px 2px skyblue"
                v_idcheck.style.color = "skyblue"
                v_idcheck.innerHTML = "사용가능한 id입니다."
            }
            f_sameid();

        }

        function f_createpw() {
            let regex = /^(?=.*[a-z])(?=.*[0-9])[a-zA-Z0-9~!@#$%^&*)(-=]{7,14}$/
            let v_result = regex.test(v_creatpw.value);
            if (!v_result) {
                v_creatpw.style.boxShadow = "0px 0px 2px 2px red"
                v_pwcheck.style.color = "red"
                v_pwcheck.innerHTML = "형식에 맞지 않는 password입니다."
            } else {
                v_creatpw.style.boxShadow = "0px 0px 2px 2px skyblue"
                v_pwcheck.style.color = "skyblue"
                v_pwcheck.innerHTML = "사용가능한 password입니다."
            }
        }

        function f_createcheck() {
            if (v_creatpwcheck.value != v_creatpw.value) {
                v_creatpwcheck.style.boxShadow = "0px 0px 2px 2px red"
                v_pwchecking.style.color = "red"
                v_pwchecking.innerHTML = "패스워드를 다시 입력해주세요."
            } else {
                v_creatpwcheck.style.boxShadow = "0px 0px 2px 2px skyblue"
                v_pwchecking.style.color = "skyblue"
                v_pwchecking.innerHTML = "일치합니다."
            }
        }

        function f_createemail() {
            let regex = /^[a-zA-Z0-9]+[@][a-z]+[.][a-z]+$/;
            let v_result = regex.test(v_createmail.value);
            if (!v_result) {
                v_createmail.style.boxShadow = "0px 0px 2px 2px red"
                v_emailcheck.style.color = "red"
                v_emailcheck.innerHTML = "형식에 맞지 않는 email입니다."
            } else {
                v_createmail.style.boxShadow = "0px 0px 2px 2px skyblue"
                v_emailcheck.style.color = "skyblue"
                v_emailcheck.innerHTML = "사용 가능한 email입니다."
            }
            f_sameemail();
        }

        function f_join() {
            if (v_namecheck.style.color == "skyblue"
                && v_idcheck.style.color == "skyblue"
                && v_pwcheck.style.color == "skyblue"
                && v_pwchecking.style.color == "skyblue"
                && v_emailcheck.style.color == "skyblue") {

                let v_userArray;
                let v_user = {};
                if (localStorage.getItem("userDB") == null) {
                    v_userArray = [];
                } else {
                    v_userArray = JSON.parse(localStorage.getItem("userDB"));
                }

                v_user["name"] = v_creatname.value;
                v_user["id"] = v_creatid.value;
                v_user["password"] = v_creatpw.value;
                v_user["email"] = v_createmail.value;
                v_userArray.push(v_user);
                console.log(v_userArray);
                localStorage.setItem("userDB", JSON.stringify(v_userArray));
                v_modal.classList.add("d_none");
                onoff=false;
                alert("회원가입이 완료되었습니다.")
            } else {
                alert("정보가 잘못되었습니다. 다시 확인해주세요.")
            }
        }
        let v_userDB = JSON.parse(localStorage.getItem("userDB"));

        function f_sameid() {
            let v_userDB = JSON.parse(localStorage.getItem("userDB"));
            for (let i = 0; i < v_userDB.length; i++) {
                if (v_userDB[i]["id"]== v_creatid.value) {
                v_creatid.style.boxShadow = "0px 0px 2px 2px red"
                v_idcheck.style.color = "red"
                v_idcheck.innerHTML = "중복되는 id입니다.";
                break;
                }
            }
        }

        function f_sameemail(){
            let v_userDB = JSON.parse(localStorage.getItem("userDB"));
            for (let i = 0; i < v_userDB.length; i++) {
                if (v_userDB[i]["email"]== v_createmail.value) {
                v_createmail.style.boxShadow = "0px 0px 2px 2px red"
                v_emailcheck.style.color = "red"
                v_emailcheck.innerHTML = "중복되는 email입니다.";
                break;
                }
            }
        }
    </script>
</body>

</html>